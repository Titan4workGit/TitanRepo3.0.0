const a0_0x2fc6fa=a0_0x3f98;function a0_0x3f98(_0x1ebdd1,_0x585a22){const _0x54e805=a0_0x54e8();return a0_0x3f98=function(_0x3f98ff,_0xdf126b){_0x3f98ff=_0x3f98ff-0x112;let _0x385bce=_0x54e805[_0x3f98ff];return _0x385bce;},a0_0x3f98(_0x1ebdd1,_0x585a22);}(function(_0x597f05,_0x1e4aa8){const _0x1ee748=a0_0x3f98,_0x1c9c53=_0x597f05();while(!![]){try{const _0x221038=parseInt(_0x1ee748(0x116))/0x1*(parseInt(_0x1ee748(0x132))/0x2)+-parseInt(_0x1ee748(0x113))/0x3+-parseInt(_0x1ee748(0x115))/0x4*(-parseInt(_0x1ee748(0x118))/0x5)+-parseInt(_0x1ee748(0x11f))/0x6+-parseInt(_0x1ee748(0x129))/0x7*(parseInt(_0x1ee748(0x12b))/0x8)+-parseInt(_0x1ee748(0x11a))/0x9*(parseInt(_0x1ee748(0x125))/0xa)+parseInt(_0x1ee748(0x112))/0xb*(parseInt(_0x1ee748(0x11b))/0xc);if(_0x221038===_0x1e4aa8)break;else _0x1c9c53['push'](_0x1c9c53['shift']());}catch(_0x180022){_0x1c9c53['push'](_0x1c9c53['shift']());}}}(a0_0x54e8,0x6b689));import{__awaiter}from'tslib';function a0_0x54e8(){const _0x4e06a3=['77LarntH','139533elXxze','length','34364ewctRa','245JLmnaY','concat','120PvIYeF','end','653517TcOgCR','1920972pamQDo','readable','range','Stream\x20ended\x20before\x20reading\x20required\x20range\x20size','3060636xuZrEf','readableLength','sliceFile','slice','name','push','120KWlYnd','size','Stream\x20is\x20not\x20readable.','readNBytesFromStream','21fAbbIy','previousSlice','332648zwHEYe','fileSlice','maxValue','Please\x20provide\x20the\x20Readable\x20Stream\x20content,\x20name\x20of\x20the\x20file\x20and\x20size\x20of\x20the\x20file','minValue','content','read','5436CSpGnB'];a0_0x54e8=function(){return _0x4e06a3;};return a0_0x54e8();}import{GraphClientError}from'../../../GraphClientError';export class StreamUpload{constructor(_0x5a1318,_0x2b2e58,_0x49ca15){const _0x53c974=a0_0x3f98;this[_0x53c974(0x130)]=_0x5a1318,this[_0x53c974(0x123)]=_0x2b2e58,this[_0x53c974(0x126)]=_0x49ca15;if(!_0x5a1318||!_0x2b2e58||!_0x49ca15)throw new GraphClientError(_0x53c974(0x12e));}[a0_0x2fc6fa(0x121)](_0x38a1e0){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x259093=a0_0x3f98;let _0x45c2f8=_0x38a1e0[_0x259093(0x12d)]-_0x38a1e0[_0x259093(0x12f)]+0x1;const _0x4b62f7=[];if(this[_0x259093(0x12a)]){if(_0x38a1e0[_0x259093(0x12f)]<this['previousSlice'][_0x259093(0x11d)][_0x259093(0x12f)])throw new GraphClientError('An\x20error\x20occurred\x20while\x20uploading\x20the\x20stream.\x20Please\x20restart\x20the\x20stream\x20upload\x20from\x20the\x20first\x20byte\x20of\x20the\x20file.');if(_0x38a1e0[_0x259093(0x12f)]<this[_0x259093(0x12a)][_0x259093(0x11d)][_0x259093(0x12d)]){const _0x4e0458=this[_0x259093(0x12a)]['range'][_0x259093(0x12f)],_0x27e1ba=this[_0x259093(0x12a)][_0x259093(0x11d)][_0x259093(0x12d)];if(_0x38a1e0[_0x259093(0x12f)]===_0x4e0458&&_0x38a1e0[_0x259093(0x12d)]===_0x27e1ba)return this[_0x259093(0x12a)]['fileSlice'];if(_0x38a1e0[_0x259093(0x12d)]===_0x27e1ba)return this[_0x259093(0x12a)][_0x259093(0x12c)][_0x259093(0x122)](_0x38a1e0['minValue'],_0x38a1e0['maxValue']+0x1);_0x4b62f7[_0x259093(0x124)](this['previousSlice'][_0x259093(0x12c)]['slice'](_0x38a1e0[_0x259093(0x12f)],_0x27e1ba+0x1)),_0x45c2f8=_0x38a1e0[_0x259093(0x12d)]-_0x27e1ba;}}if(this[_0x259093(0x130)]&&this[_0x259093(0x130)][_0x259093(0x11c)])this[_0x259093(0x130)][_0x259093(0x120)]>=_0x45c2f8?_0x4b62f7[_0x259093(0x124)](this[_0x259093(0x130)]['read'](_0x45c2f8)):_0x4b62f7[_0x259093(0x124)](yield this[_0x259093(0x128)](_0x45c2f8));else throw new GraphClientError(_0x259093(0x127));const _0x369318=Buffer['concat'](_0x4b62f7);return this['previousSlice']={'fileSlice':_0x369318,'range':_0x38a1e0},_0x369318;});}[a0_0x2fc6fa(0x128)](_0x1f6b0d){return new Promise((_0x848015,_0xde31f)=>{const _0x167c10=a0_0x3f98,_0x377688=[];let _0x3913a7=_0x1f6b0d,_0x397d53=0x0;this['content']['on'](_0x167c10(0x119),()=>{const _0x420ca1=_0x167c10;if(_0x3913a7>0x0)return _0xde31f(new GraphClientError(_0x420ca1(0x11e)));}),this[_0x167c10(0x130)]['on'](_0x167c10(0x11c),()=>{const _0xce9ed7=_0x167c10;let _0x16312b;while(_0x397d53<_0x1f6b0d&&(_0x16312b=this[_0xce9ed7(0x130)][_0xce9ed7(0x131)](_0x3913a7))!==null){_0x397d53+=_0x16312b[_0xce9ed7(0x114)],_0x377688[_0xce9ed7(0x124)](_0x16312b),_0x3913a7>0x0&&(_0x3913a7=_0x1f6b0d-_0x397d53);}if(_0x397d53===_0x1f6b0d)return _0x848015(Buffer[_0xce9ed7(0x117)](_0x377688));if(!this[_0xce9ed7(0x130)]||!this['content'][_0xce9ed7(0x11c)])return _0xde31f(new GraphClientError('Error\x20encountered\x20while\x20reading\x20the\x20stream\x20during\x20the\x20upload'));});});}}