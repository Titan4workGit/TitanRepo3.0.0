const a0_0x5ed90e=a0_0x50fb;(function(_0x39ed26,_0x500c25){const _0x27d281=a0_0x50fb,_0x1524d6=_0x39ed26();while(!![]){try{const _0x13f3f7=parseInt(_0x27d281(0x17f))/0x1+parseInt(_0x27d281(0x162))/0x2*(-parseInt(_0x27d281(0x18b))/0x3)+-parseInt(_0x27d281(0x18a))/0x4+parseInt(_0x27d281(0x168))/0x5*(parseInt(_0x27d281(0x174))/0x6)+parseInt(_0x27d281(0x161))/0x7+parseInt(_0x27d281(0x178))/0x8+parseInt(_0x27d281(0x177))/0x9;if(_0x13f3f7===_0x500c25)break;else _0x1524d6['push'](_0x1524d6['shift']());}catch(_0x3c4d5a){_0x1524d6['push'](_0x1524d6['shift']());}}}(a0_0x4471,0x77262));import{__awaiter}from'tslib';import{RequestMethod}from'../RequestMethod';import{MiddlewareControl}from'./MiddlewareControl';import{cloneRequestWithNewUrl}from'./MiddlewareUtil';import{RedirectHandlerOptions}from'./options/RedirectHandlerOptions';import{FeatureUsageFlag,TelemetryHandlerOptions}from'./options/TelemetryHandlerOptions';function a0_0x50fb(_0x15cf01,_0x4bf731){const _0x44717c=a0_0x4471();return a0_0x50fb=function(_0x50fb10,_0x19d41c){_0x50fb10=_0x50fb10-0x15f;let _0x3bdf92=_0x44717c[_0x50fb10];return _0x3bdf92;},a0_0x50fb(_0x15cf01,_0x4bf731);}function a0_0x4471(){const _0x203c48=['3467824kQdKWM','381rAEOtp','exec','STATUS_CODE_SEE_OTHER','LOCATION_HEADER','1472842qKCafl','13908IKvdIs','AUTHORIZATION_HEADER','request','undefined','indexOf','Location','265JghBXd','response','shouldRedirect','GET','shouldDropAuthorizationHeader','updateRequestUrl','nextMiddleware','getLocationHeader','://','status','options','headers','87516vWJfqD','redirect','REDIRECT_STATUS_CODES','6768531ZidWQX','1888864JXNbQZ','isRedirect','isRelativeURL','execute','updateFeatureUsageFlag','MANUAL_REDIRECT','middlewareControl','266517rjqviv','get','string','setNext','hasLocationHeader','Authorization','REDIRECT_HANDLER_ENABLED','getMiddlewareOptions','assign','executeWithRedirect','getOptions'];a0_0x4471=function(){return _0x203c48;};return a0_0x4471();}export class RedirectHandler{constructor(_0xb3453c=new RedirectHandlerOptions()){const _0x237fa0=a0_0x50fb;this[_0x237fa0(0x172)]=_0xb3453c;}['isRedirect'](_0x238192){const _0x5c190a=a0_0x50fb;return RedirectHandler[_0x5c190a(0x176)][_0x5c190a(0x166)](_0x238192[_0x5c190a(0x171)])!==-0x1;}[a0_0x5ed90e(0x183)](_0x5d365e){const _0x340d2e=a0_0x5ed90e;return _0x5d365e[_0x340d2e(0x173)]['has'](RedirectHandler[_0x340d2e(0x160)]);}[a0_0x5ed90e(0x16f)](_0x248d6c){const _0x777067=a0_0x5ed90e;return _0x248d6c['headers'][_0x777067(0x180)](RedirectHandler[_0x777067(0x160)]);}[a0_0x5ed90e(0x17a)](_0x432b03){const _0x4b8bec=a0_0x5ed90e;return _0x432b03[_0x4b8bec(0x166)](_0x4b8bec(0x170))===-0x1;}[a0_0x5ed90e(0x16c)](_0x4b1dab,_0x1a0cd9){const _0x38ade3=a0_0x5ed90e,_0x171d6f=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,_0x28b01a=_0x171d6f[_0x38ade3(0x18c)](_0x4b1dab);let _0x89a7b4,_0x7d0169;_0x28b01a!==null&&(_0x89a7b4=_0x28b01a[0x0]);const _0x47f896=_0x171d6f[_0x38ade3(0x18c)](_0x1a0cd9);return _0x47f896!==null&&(_0x7d0169=_0x47f896[0x0]),typeof _0x89a7b4!=='undefined'&&typeof _0x7d0169!=='undefined'&&_0x89a7b4!==_0x7d0169;}[a0_0x5ed90e(0x16d)](_0x44e058,_0x5e45cf){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x425121=a0_0x50fb;_0x5e45cf[_0x425121(0x164)]=typeof _0x5e45cf[_0x425121(0x164)]===_0x425121(0x181)?_0x44e058:yield cloneRequestWithNewUrl(_0x44e058,_0x5e45cf[_0x425121(0x164)]);});}['getOptions'](_0x2327f1){const _0x499c7b=a0_0x5ed90e;let _0x3e49c7;return _0x2327f1[_0x499c7b(0x17e)]instanceof MiddlewareControl&&(_0x3e49c7=_0x2327f1['middlewareControl'][_0x499c7b(0x186)](RedirectHandlerOptions)),typeof _0x3e49c7===_0x499c7b(0x165)&&(_0x3e49c7=Object[_0x499c7b(0x187)](new RedirectHandlerOptions(),this[_0x499c7b(0x172)])),_0x3e49c7;}[a0_0x5ed90e(0x188)](_0x38c46b,_0x3837a7,_0x2bd69b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5144a8=a0_0x50fb;yield this['nextMiddleware'][_0x5144a8(0x17b)](_0x38c46b);const _0x4d101f=_0x38c46b[_0x5144a8(0x169)];if(_0x3837a7<_0x2bd69b['maxRedirects']&&this[_0x5144a8(0x179)](_0x4d101f)&&this[_0x5144a8(0x183)](_0x4d101f)&&_0x2bd69b[_0x5144a8(0x16a)](_0x4d101f)){++_0x3837a7;if(_0x4d101f[_0x5144a8(0x171)]===RedirectHandler[_0x5144a8(0x15f)])_0x38c46b['options']['method']=RequestMethod[_0x5144a8(0x16b)],delete _0x38c46b[_0x5144a8(0x172)]['body'];else{const _0x1a8d09=this['getLocationHeader'](_0x4d101f);!this[_0x5144a8(0x17a)](_0x1a8d09)&&this[_0x5144a8(0x16c)](_0x4d101f['url'],_0x1a8d09)&&delete _0x38c46b[_0x5144a8(0x172)][_0x5144a8(0x173)][RedirectHandler[_0x5144a8(0x163)]],yield this['updateRequestUrl'](_0x1a8d09,_0x38c46b);}yield this['executeWithRedirect'](_0x38c46b,_0x3837a7,_0x2bd69b);}else return;});}[a0_0x5ed90e(0x17b)](_0x19fbdc){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x493e93=a0_0x50fb,_0xfd624a=0x0,_0x154df0=this[_0x493e93(0x189)](_0x19fbdc);return _0x19fbdc['options'][_0x493e93(0x175)]=RedirectHandler[_0x493e93(0x17d)],TelemetryHandlerOptions[_0x493e93(0x17c)](_0x19fbdc,FeatureUsageFlag[_0x493e93(0x185)]),yield this['executeWithRedirect'](_0x19fbdc,_0xfd624a,_0x154df0);});}[a0_0x5ed90e(0x182)](_0x46d9c2){const _0x45eb31=a0_0x5ed90e;this[_0x45eb31(0x16e)]=_0x46d9c2;}}RedirectHandler[a0_0x5ed90e(0x176)]=[0x12d,0x12e,0x12f,0x133,0x134],RedirectHandler['STATUS_CODE_SEE_OTHER']=0x12f,RedirectHandler['LOCATION_HEADER']=a0_0x5ed90e(0x167),RedirectHandler[a0_0x5ed90e(0x163)]=a0_0x5ed90e(0x184),RedirectHandler['MANUAL_REDIRECT']='manual';