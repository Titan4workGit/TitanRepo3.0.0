var a0_0xe8863b=a0_0x3d7f;function a0_0x3d7f(_0x3ba3ff,_0x16290b){var _0x46fdd0=a0_0x46fd();return a0_0x3d7f=function(_0x3d7f5b,_0xe6a8d9){_0x3d7f5b=_0x3d7f5b-0xe5;var _0x32ea84=_0x46fdd0[_0x3d7f5b];return _0x32ea84;},a0_0x3d7f(_0x3ba3ff,_0x16290b);}(function(_0x443983,_0x3947c1){var _0x3aff6d=a0_0x3d7f,_0x54ee33=_0x443983();while(!![]){try{var _0x50379a=-parseInt(_0x3aff6d(0xf1))/0x1+-parseInt(_0x3aff6d(0xe9))/0x2+parseInt(_0x3aff6d(0x10b))/0x3*(-parseInt(_0x3aff6d(0x111))/0x4)+parseInt(_0x3aff6d(0x106))/0x5*(parseInt(_0x3aff6d(0x119))/0x6)+parseInt(_0x3aff6d(0x118))/0x7*(-parseInt(_0x3aff6d(0x105))/0x8)+-parseInt(_0x3aff6d(0x10d))/0x9*(parseInt(_0x3aff6d(0xfa))/0xa)+parseInt(_0x3aff6d(0xf7))/0xb;if(_0x50379a===_0x3947c1)break;else _0x54ee33['push'](_0x54ee33['shift']());}catch(_0x5bc637){_0x54ee33['push'](_0x54ee33['shift']());}}}(a0_0x46fd,0x5c389));var viewer;const CLIENT_ID=a0_0xe8863b(0x103),CLIENT_SECRET='R0cGGyke0Pv0sKMw',ACCESS_TOKEN_ENDPOINT=a0_0xe8863b(0x100);var YOUR_ACCESS_TOKEN='',siteUrl=_spPageContextInfo['webAbsoluteUrl'];function getAccessToken(){var _0x17bd15=a0_0xe8863b;$[_0x17bd15(0x115)]({'url':ACCESS_TOKEN_ENDPOINT,'type':_0x17bd15(0x102),'async':![],'data':{'client_id':CLIENT_ID,'client_secret':CLIENT_SECRET,'grant_type':_0x17bd15(0x101),'scope':_0x17bd15(0x108)},'success':function(_0x3cbf6b){const _0x344253=_0x3cbf6b['access_token'];YOUR_ACCESS_TOKEN=_0x344253;},'error':function(_0x1e4625,_0x3f7a53,_0x55095b){var _0x404758=_0x17bd15;console[_0x404758(0x107)](_0x55095b);}});}var context,web,fileUrl='/sites/Titan_2_2_1_DEV/DemoLibrary/1343939490.dwg',fileContents,clientId=a0_0xe8863b(0x103),clientSecret=a0_0xe8863b(0xf3),bucketName='test1';SP[a0_0xe8863b(0xfd)][a0_0xe8863b(0xf2)](a0_0xe8863b(0xff),a0_0xe8863b(0x109),function(){var _0x284303=a0_0xe8863b,_0x2e84a8=new XMLHttpRequest();_0x2e84a8[_0x284303(0xf4)](_0x284303(0xee),siteUrl+_0x284303(0x112)+fileUrl+_0x284303(0xec),!![]),_0x2e84a8[_0x284303(0xe7)](_0x284303(0xfc),'application/octet-stream'),_0x2e84a8[_0x284303(0x117)]='arraybuffer',_0x2e84a8[_0x284303(0x10e)]=function(){var _0x18f12a=_0x284303;file=_0x2e84a8[_0x18f12a(0xf9)];},_0x2e84a8[_0x284303(0xfe)](),getAccessTokens();});function getAccessTokens(){var _0x25ce80=a0_0xe8863b;$[_0x25ce80(0x115)]({'url':'https://developer.api.autodesk.com/authentication/v1/authenticate','type':_0x25ce80(0x102),'headers':{'Content-Type':_0x25ce80(0x10c)},'data':{'client_id':clientId,'client_secret':clientSecret,'grant_type':_0x25ce80(0x101),'scope':_0x25ce80(0x114)},'success':function(_0x2ddef8){var _0x19b5a2=_0x25ce80,_0x3601b0=_0x2ddef8['access_token'];debugger;uploadFileToForge(file,_0x3601b0,bucketName)['then'](function(_0x59ae14){displayFileInViewer(_0x59ae14,_0x3601b0);})[_0x19b5a2(0x10f)](function(_0x2364f5){var _0xd7db0b=_0x19b5a2;console[_0xd7db0b(0x107)]('Error\x20uploading\x20file:',_0x2364f5);});},'error':function(_0x3b3ffc){var _0x3035c5=_0x25ce80;console[_0x3035c5(0x107)]('Error\x20obtaining\x20access\x20token:',_0x3b3ffc);}});}function getFileFromSharePoint(_0x58822f){var _0x43360c=a0_0xe8863b,_0x1edb8a=web['getFileByServerRelativeUrl'](_0x58822f),_0x165b8b=_0x1edb8a[_0x43360c(0xe6)]();return _0x165b8b;}function uploadFileToForge(_0x540e7f,_0x2da0dd,_0x2c5d51){return new Promise(function(_0x5ed55b,_0x4ce555){var _0x5d9396=a0_0x3d7f;$['ajax']({'url':'https://developer.api.autodesk.com/oss/v2/buckets/'+_0x2c5d51+'/objects/'+fileUrl,'type':_0x5d9396(0x10a),'headers':{'Authorization':_0x5d9396(0x113)+_0x2da0dd,'Content-Type':'application/octet-stream','x-ms-blob-type':'BlockBlob'},'data':_0x540e7f,'processData':![],'success':function(_0x424f65){var _0x46eb28=_0x5d9396,_0x399de1=_0x424f65[_0x46eb28(0xed)][_0x46eb28(0x104)]();_0x5ed55b(_0x399de1);},'error':function(_0xaae276){_0x4ce555(_0xaae276);}});});}function displayFileInViewer(_0x4b1503,_0x56cdec){var _0x571a6e=a0_0xe8863b,_0x17941a=new Autodesk[(_0x571a6e(0x11a))]['Private']['GuiViewer3D'](document[_0x571a6e(0xfb)](_0x571a6e(0xf5))),_0x2c716c={'env':_0x571a6e(0xef),'accessToken':_0x56cdec};Autodesk['Viewing'][_0x571a6e(0xf0)](_0x2c716c,function(){var _0x288d9f=_0x571a6e;_0x17941a[_0x288d9f(0xeb)]();var _0x13418c='urn:'+_0x4b1503;Autodesk['Viewing'][_0x288d9f(0xf6)][_0x288d9f(0xe5)](_0x13418c,function(_0xb1099){var _0x172962=_0x288d9f,_0x3917ad=_0xb1099[_0x172962(0x116)]()['getDefaultGeometry']();_0x17941a[_0x172962(0x110)](_0xb1099,_0x3917ad);},function(_0x1e0e48){var _0x50596a=_0x288d9f;console[_0x50596a(0x107)]('Error\x20loading\x20document:',_0x1e0e48);});});}function createBucket(_0x5ccc09,_0x510925){return new Promise(function(_0x33c29e,_0x1e644f){var _0x16e742=a0_0x3d7f;$[_0x16e742(0x115)]({'url':_0x16e742(0xf8),'type':_0x16e742(0x102),'headers':{'Authorization':_0x16e742(0x113)+_0x510925,'Content-Type':_0x16e742(0xea)},'data':JSON['stringify']({'bucketKey':_0x5ccc09,'policyKey':_0x16e742(0xe8)}),'success':function(_0x3233bd){_0x33c29e();},'error':function(_0x2e6900){_0x1e644f(_0x2e6900);}});});}function a0_0x46fd(){var _0x5dede9=['976944yepeXk','/_api/web/GetFileByServerRelativeUrl(\x27','Bearer\x20','data:read\x20data:write\x20data:create\x20bucket:create','ajax','getRoot','responseType','495131zPgLZa','3992988vppnia','Viewing','load','openBinaryStream','setRequestHeader','transient','182688NizMdb','application/json','start','\x27)/$value','objectId','GET','AutodeskProduction','Initializer','236044EIAtJB','executeFunc','R0cGGyke0Pv0sKMw','open','viewer','Document','19173209JIxWtC','https://developer.api.autodesk.com/oss/v2/buckets','response','70UBjOUg','getElementById','Accept','SOD','send','sp.js','https://developer.api.autodesk.com/authentication/v1/authenticate','client_credentials','POST','bBUBO3wtnwPNYg6AeAtrIFDbMIcsGTt0','toBase64','56LOukfg','5jUpsQI','error','data:read','SP.ClientContext','PUT','6sfEdTE','application/x-www-form-urlencoded','925443VtAYSl','onload','catch','loadDocumentNode'];a0_0x46fd=function(){return _0x5dede9;};return a0_0x46fd();}