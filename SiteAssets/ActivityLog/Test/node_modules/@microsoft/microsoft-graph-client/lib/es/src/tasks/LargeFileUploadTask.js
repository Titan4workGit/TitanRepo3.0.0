const a0_0x2a5ec3=a0_0x1e41;(function(_0x4ce33d,_0x49a877){const _0x329bae=a0_0x1e41,_0x54729e=_0x4ce33d();while(!![]){try{const _0x27ca36=parseInt(_0x329bae(0x106))/0x1+parseInt(_0x329bae(0x135))/0x2+-parseInt(_0x329bae(0x13a))/0x3*(parseInt(_0x329bae(0x11f))/0x4)+-parseInt(_0x329bae(0x139))/0x5*(parseInt(_0x329bae(0x101))/0x6)+parseInt(_0x329bae(0x12b))/0x7*(-parseInt(_0x329bae(0x13f))/0x8)+-parseInt(_0x329bae(0x120))/0x9+-parseInt(_0x329bae(0x11e))/0xa*(-parseInt(_0x329bae(0x12c))/0xb);if(_0x27ca36===_0x49a877)break;else _0x54729e['push'](_0x54729e['shift']());}catch(_0x26787d){_0x54729e['push'](_0x54729e['shift']());}}}(a0_0x42f3,0x3dcbe));import{__awaiter}from'tslib';function a0_0x1e41(_0x589c90,_0x5a9333){const _0x42f356=a0_0x42f3();return a0_0x1e41=function(_0x1e410d,_0x129c2c){_0x1e410d=_0x1e410d-0x101;let _0x2559f4=_0x42f356[_0x1e410d];return _0x2559f4;},a0_0x1e41(_0x589c90,_0x5a9333);}import{GraphClientError}from'../GraphClientError';import{GraphResponseHandler}from'../GraphResponseHandler';function a0_0x42f3(){const _0x3d3bd5=['content','extraCallbackParam','9501jiHhKR','cancel','url','getUploadSession','uploadSession','Please\x20pass\x20the\x20FileUpload\x20object,\x20StreamUpload\x20object\x20or\x20any\x20custom\x20implementation\x20of\x20the\x20FileObject\x20interface','sliceFile','responseType','size','RAW','headers','parseRange','isCancelled','The\x20LargeFileUploadTask.sliceFile()\x20function\x20has\x20been\x20deprecated\x20and\x20moved\x20into\x20the\x20FileObject\x20interface.','upload','DEFAULT_FILE_SIZE','post','expirationDateTime','Something\x20went\x20wrong!\x20Large\x20file\x20upload\x20slice\x20response\x20is\x20null.','getResponse','uploadSliceGetRawResponse','warn','uploadSlice','bytes\x20','44180PkrzJl','84eNfikP','1516365NVGHVn','nextRange','reportProgress','ExpirationDateTime','status','Invalid\x20Session','createUploadSession','client','getNextRange','uploadUrl','CreateUploadResult','7QyMFja','2035lYfLPi','progress','split','isNaN','getStatus','updateTaskStatus','slice','rangeSize','file','817678nVqHov','put','undefined','minValue','725HjtuEX','14199YDKqeU','maxValue','api','NextExpectedRanges','options','2581912GiWDKs','nextExpectedRanges','16218HMWMEI','resume','get'];a0_0x42f3=function(){return _0x3d3bd5;};return a0_0x42f3();}import{ResponseType}from'../ResponseType';import{Range}from'./FileUploadTask/Range';import{UploadResult}from'./FileUploadTask/UploadResult';export class LargeFileUploadTask{static[a0_0x2a5ec3(0x126)](_0x11163b,_0x4360cf,_0x2c645d,_0x386ce7={}){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x260dbf=a0_0x1e41,_0xbc1308=yield _0x11163b[_0x260dbf(0x13c)](_0x4360cf)[_0x260dbf(0x110)](_0x386ce7)[_0x260dbf(0x116)](_0x2c645d),_0xd3e085={'url':_0xbc1308[_0x260dbf(0x129)],'expiry':new Date(_0xbc1308[_0x260dbf(0x117)]),'isCancelled':![]};return _0xd3e085;});}constructor(_0xf1bb47,_0x449a75,_0x4fd86d,_0x2a7eda={}){const _0x4d7717=a0_0x2a5ec3;this['DEFAULT_FILE_SIZE']=0x5*0x400*0x400,this['client']=_0xf1bb47;if(!_0x449a75[_0x4d7717(0x10c)])throw new GraphClientError(_0x4d7717(0x10b));else this['file']=_0x449a75;this['file']=_0x449a75,!_0x2a7eda[_0x4d7717(0x133)]&&(_0x2a7eda[_0x4d7717(0x133)]=this[_0x4d7717(0x115)]),this[_0x4d7717(0x13e)]=_0x2a7eda,this[_0x4d7717(0x10a)]=_0x4fd86d,this[_0x4d7717(0x121)]=new Range(0x0,this[_0x4d7717(0x13e)]['rangeSize']-0x1);}['parseRange'](_0x41f1a1){const _0x29dcb4=a0_0x2a5ec3,_0x3aa2da=_0x41f1a1[0x0];if(typeof _0x3aa2da===_0x29dcb4(0x137)||_0x3aa2da==='')return new Range();const _0xa7a4ca=_0x3aa2da[_0x29dcb4(0x12e)]('-'),_0x2f7502=parseInt(_0xa7a4ca[0x0],0xa);let _0x5d80c3=parseInt(_0xa7a4ca[0x1],0xa);return Number[_0x29dcb4(0x12f)](_0x5d80c3)&&(_0x5d80c3=this['file'][_0x29dcb4(0x10e)]-0x1),new Range(_0x2f7502,_0x5d80c3);}['updateTaskStatus'](_0x5df06a){const _0x13e09c=a0_0x2a5ec3;this[_0x13e09c(0x10a)]['expiry']=new Date(_0x5df06a['expirationDateTime']),this[_0x13e09c(0x121)]=this[_0x13e09c(0x111)](_0x5df06a[_0x13e09c(0x140)]);}[a0_0x2a5ec3(0x128)](){const _0x426bd1=a0_0x2a5ec3;if(this[_0x426bd1(0x121)][_0x426bd1(0x138)]===-0x1)return this[_0x426bd1(0x121)];const _0x176b75=this[_0x426bd1(0x121)][_0x426bd1(0x138)];let _0x450aa8=_0x176b75+this['options'][_0x426bd1(0x133)]-0x1;return _0x450aa8>=this[_0x426bd1(0x134)][_0x426bd1(0x10e)]&&(_0x450aa8=this[_0x426bd1(0x134)][_0x426bd1(0x10e)]-0x1),new Range(_0x176b75,_0x450aa8);}['sliceFile'](_0x536685){const _0x37c4e0=a0_0x2a5ec3;console[_0x37c4e0(0x11b)](_0x37c4e0(0x113));if(this['file'][_0x37c4e0(0x104)]instanceof ArrayBuffer||this[_0x37c4e0(0x134)][_0x37c4e0(0x104)]instanceof Blob||this[_0x37c4e0(0x134)][_0x37c4e0(0x104)]instanceof Uint8Array)return this['file'][_0x37c4e0(0x104)][_0x37c4e0(0x132)](_0x536685[_0x37c4e0(0x138)],_0x536685[_0x37c4e0(0x13b)]+0x1);throw new GraphClientError('The\x20LargeFileUploadTask.sliceFile()\x20function\x20expects\x20only\x20Blob,\x20ArrayBuffer\x20or\x20Uint8Array\x20file\x20content.\x20Please\x20note\x20that\x20the\x20sliceFile()\x20function\x20is\x20deprecated.');}[a0_0x2a5ec3(0x114)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x18ad60=a0_0x1e41,_0x3b6f9f=this['options']&&this[_0x18ad60(0x13e)]['uploadEventHandlers'];while(!this['uploadSession'][_0x18ad60(0x112)]){const _0x227064=this[_0x18ad60(0x128)]();if(_0x227064[_0x18ad60(0x13b)]===-0x1){const _0x2f6331=new Error('Task\x20with\x20which\x20you\x20are\x20trying\x20to\x20upload\x20is\x20already\x20completed,\x20Please\x20check\x20for\x20your\x20uploaded\x20file');_0x2f6331['name']=_0x18ad60(0x125);throw _0x2f6331;}const _0x1c9d92=yield this[_0x18ad60(0x134)]['sliceFile'](_0x227064),_0x24cb6c=yield this['uploadSliceGetRawResponse'](_0x1c9d92,_0x227064,this[_0x18ad60(0x134)][_0x18ad60(0x10e)]);if(!_0x24cb6c)throw new GraphClientError(_0x18ad60(0x118));const _0x87c187=yield GraphResponseHandler[_0x18ad60(0x119)](_0x24cb6c);if(_0x24cb6c[_0x18ad60(0x124)]===0xc9||_0x24cb6c[_0x18ad60(0x124)]===0xc8&&_0x87c187['id'])return this[_0x18ad60(0x122)](_0x3b6f9f,_0x227064),UploadResult[_0x18ad60(0x12a)](_0x87c187,_0x24cb6c['headers']);const _0x3ead52={'expirationDateTime':_0x87c187[_0x18ad60(0x117)]||_0x87c187[_0x18ad60(0x123)],'nextExpectedRanges':_0x87c187[_0x18ad60(0x13d)]||_0x87c187['nextExpectedRanges']};this[_0x18ad60(0x131)](_0x3ead52),this['reportProgress'](_0x3b6f9f,_0x227064);}});}[a0_0x2a5ec3(0x122)](_0x188046,_0x46e6a5){const _0x4d8f20=a0_0x2a5ec3;_0x188046&&_0x188046[_0x4d8f20(0x12d)]&&_0x188046[_0x4d8f20(0x12d)](_0x46e6a5,_0x188046[_0x4d8f20(0x105)]);}[a0_0x2a5ec3(0x11c)](_0x5158de,_0x337e56,_0x57e052){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x539639=a0_0x1e41;return yield this['client'][_0x539639(0x13c)](this[_0x539639(0x10a)]['url'])[_0x539639(0x110)]({'Content-Length':''+(_0x337e56[_0x539639(0x13b)]-_0x337e56[_0x539639(0x138)]+0x1),'Content-Range':_0x539639(0x11d)+_0x337e56[_0x539639(0x138)]+'-'+_0x337e56[_0x539639(0x13b)]+'/'+_0x57e052,'Content-Type':'application/octet-stream'})['put'](_0x5158de);});}[a0_0x2a5ec3(0x11a)](_0x1acb4a,_0x720b4e,_0x122bdf){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4ec117=a0_0x1e41;return yield this[_0x4ec117(0x127)][_0x4ec117(0x13c)](this['uploadSession'][_0x4ec117(0x108)])['headers']({'Content-Length':''+(_0x720b4e[_0x4ec117(0x13b)]-_0x720b4e[_0x4ec117(0x138)]+0x1),'Content-Range':_0x4ec117(0x11d)+_0x720b4e['minValue']+'-'+_0x720b4e[_0x4ec117(0x13b)]+'/'+_0x122bdf,'Content-Type':'application/octet-stream'})[_0x4ec117(0x10d)](ResponseType[_0x4ec117(0x10f)])[_0x4ec117(0x136)](_0x1acb4a);});}[a0_0x2a5ec3(0x107)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x250837=a0_0x1e41,_0x3f70a4=yield this[_0x250837(0x127)][_0x250837(0x13c)](this[_0x250837(0x10a)][_0x250837(0x108)])[_0x250837(0x10d)](ResponseType[_0x250837(0x10f)])['delete']();return _0x3f70a4[_0x250837(0x124)]===0xcc&&(this[_0x250837(0x10a)][_0x250837(0x112)]=!![]),_0x3f70a4;});}[a0_0x2a5ec3(0x130)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4f6f2c=a0_0x1e41,_0x6da56=yield this[_0x4f6f2c(0x127)][_0x4f6f2c(0x13c)](this[_0x4f6f2c(0x10a)][_0x4f6f2c(0x108)])[_0x4f6f2c(0x103)]();return this[_0x4f6f2c(0x131)](_0x6da56),_0x6da56;});}[a0_0x2a5ec3(0x102)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d709b=a0_0x1e41;return yield this[_0x4d709b(0x130)](),yield this[_0x4d709b(0x114)]();});}[a0_0x2a5ec3(0x109)](){return this['uploadSession'];}}