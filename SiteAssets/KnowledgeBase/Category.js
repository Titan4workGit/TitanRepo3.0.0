var a0_0x2fdde6=a0_0x54d9;(function(_0x2e848c,_0x35a674){var _0x2b64ba=a0_0x54d9,_0x46f4d0=_0x2e848c();while(!![]){try{var _0x1a961e=parseInt(_0x2b64ba(0xf2))/0x1*(-parseInt(_0x2b64ba(0xf1))/0x2)+parseInt(_0x2b64ba(0x136))/0x3*(-parseInt(_0x2b64ba(0xe0))/0x4)+parseInt(_0x2b64ba(0x116))/0x5+parseInt(_0x2b64ba(0xe2))/0x6+parseInt(_0x2b64ba(0xd0))/0x7+parseInt(_0x2b64ba(0x125))/0x8+-parseInt(_0x2b64ba(0x133))/0x9*(parseInt(_0x2b64ba(0xd3))/0xa);if(_0x1a961e===_0x35a674)break;else _0x46f4d0['push'](_0x46f4d0['shift']());}catch(_0x30b56c){_0x46f4d0['push'](_0x46f4d0['shift']());}}}(a0_0x4c72,0x2e69a));var currentDepartnemtUrls='',categoryId='',departmentID='',isCurrentUserAuthorizedtoKnowledgeAdmin=![];$(document)[a0_0x2fdde6(0xdc)](function(){var _0x348971=a0_0x2fdde6;userActivityNotificationEntry(_spPageContextInfo[_0x348971(0xd8)],window[_0x348971(0x11a)]),$[_0x348971(0x10e)]({'cache':![]}),departmentID=GetParameterValues(_0x348971(0xf5));Logged_DepartmentId==departmentID?$(_0x348971(0xfc))[_0x348971(0xe4)]():$('#btnAddNewTopic')[_0x348971(0xce)]();var _0x2840c7=titanForWork['getQueryStringParameter'](_0x348971(0xeb)),_0x1ad846=new Array();_0x1ad846[_0x348971(0xcf)]('Knowledge');var _0x45f587=UserExistInProcessApprover(_0x2840c7,departmentID,_0x1ad846);for(var _0x48a925=0x0;_0x48a925<_0x45f587[_0x348971(0x103)];_0x48a925++){_0x45f587[_0x48a925][_0x348971(0x12f)]=='Knowledge'&&(isCurrentUserAuthorizedtoKnowledgeAdmin=!![]);}InitializationComponents(),$(_0x348971(0x127))[_0x348971(0x10f)](function(){var _0x4c0ddc=_0x348971;$(_0x4c0ddc(0x106))[_0x4c0ddc(0xfb)](''),$(_0x4c0ddc(0x11c))[_0x4c0ddc(0x108)](_0x4c0ddc(0xe4));}),$('#btnAddUpdateCategory')[_0x348971(0x10f)](function(){var _0x39c81c=_0x348971,_0x2d000b=$(_0x39c81c(0x106))[_0x39c81c(0xfb)]()[_0x39c81c(0x111)]();if(_0x2d000b!=''&&_0x2d000b!=null){var _0x1ae091=categoryId;CategoryNameValidation(_0x2d000b,_0x1ae091)==0x0?_0x1ae091==''||_0x1ae091==null?AddNewCategory():UpdateCategory(_0x1ae091):alert(_0x39c81c(0x13d));}else alert(_0x39c81c(0xe8));}),$(_0x348971(0xfc))['click'](function(){var _0x408d58=_0x348971;departmentID>0x0&&(document[_0x408d58(0x11a)][_0x408d58(0xfa)]=_0x408d58(0x12c)+departmentID+'&undefined=undefined');}),isCurrentUserAuthorizedtoKnowledgeAdmin==![]&&$(_0x348971(0x127))[_0x348971(0xe5)]();});function a0_0x54d9(_0x239659,_0x51fabd){var _0x4c7286=a0_0x4c72();return a0_0x54d9=function(_0x54d9de,_0x44a65a){_0x54d9de=_0x54d9de-0xce;var _0x2d11c0=_0x4c7286[_0x54d9de];return _0x2d11c0;},a0_0x54d9(_0x239659,_0x51fabd);}function InitializationComponents(){var _0x2b90e4=a0_0x2fdde6;departmentID>0x0&&GetDepartmentUrl(_0x2b90e4(0x119),departmentID);}function a0_0x4c72(){var _0x3ede00=['Are\x20you\x20sure,You\x20want\x20to\x20delete\x20this\x20category\x20?','130ZUroPs','error','<td>','Error\x20in\x20Category\x20Topic.','fail','userId','reject','charAt','checked','ready','</thead>','log','join','184388kkDJDO','indexOf','1512042gvcNma','#categoryListItems','show','remove','DELETE','promise','Please\x20enter\x20category.','PendingCounter',')\x22>','CompanyId','</td>','<tbody\x20id=\x22listCollection\x22>','PublishedCounter','when','<td><span\x20class=\x22action-edit-button\x22><a\x20onclick=OpenUpdateModalPopup(\x22','2EEpyhV','151511pmLceM','PATCH','results','DepartmentId','KnowledgeBaseCategory','</table>','</tbody>','<input\x20id=\x22chkItemStatus_','href','val','#btnAddNewTopic','SP.Data.','<span\x20class=\x22slider\x20round\x22></span></label></td>','<tr>','Deferred','unbind','\x22)><i\x20class=\x22fa\x20fa-trash\x22></i></a></span>','length','POST','DepartmentName','#txtCategory','#txtSomethingWentWrong','modal','stringify','\x22\x20type=\x22checkbox\x22\x20','\x22,\x22','<td><a\x20style=\x22cursor:pointer\x22\x20onclick=\x22RedirectOnCategoryTopics(','application/json;odata=verbose','ajaxSetup','click','slice','trim','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Category\x22>Category</th>','<td></td>','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Status\x22>Status</th>','toUpperCase','1277680LgMZEc','append','ID,Modified,Status,Title,PublishedCounter,PendingCounter,DraftCounter&$top=5000&$orderby=Modified\x20desc','Departments','location','prop','#myModal','SiteURL','ListItem','<label\x20class=\x22switch\x22>','Description','ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27','DraftCounter','webAbsoluteUrl','\x27\x20and\x20ID\x20ne\x20\x27','956784WtDdZU','/_api/web/lists/getbytitle(\x27','#btnAddCateg','Category\x20has\x20been\x20added\x20successfully.','split','input[id^=\x27chkItemStatus_\x27]','</tr>','../Pages/AddKnowledge.aspx?WebAppId=232&DepartmentId=','attr','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22LastUpdated\x22>Last\x20Updated</th>','webPartName','<span\x20class=\x22action-delete-button\x22><a\x20onclick=DeleteItemCategory(\x22','done','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Published\x22>Published</th>','170703NBNGRu','&undefined=undefined','ajax','18oEfcXQ','&$filter=Status\x20eq\x20\x271\x27','change','#__REQUESTDIGEST','html','resolve','&topiccategoryid=','Category\x20name\x20is\x20already\x20exist.','#deptName','<table\x20class=\x22table\x20table2\x22>','hide','push','1663403IlbOTX','/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL,DepartmentName&$filter=ID\x20eq\x20\x27'];a0_0x4c72=function(){return _0x3ede00;};return a0_0x4c72();}function BindStatusChangeEvent(){var _0x332d2f=a0_0x2fdde6;$(_0x332d2f(0x12a))[_0x332d2f(0x101)]()[_0x332d2f(0x138)](function(){var _0x23105d=_0x332d2f,_0x34edcb=$(this)[_0x23105d(0x12d)]('id'),_0x2251e7=_0x34edcb[_0x23105d(0x129)]('_')[0x1];$(this)[_0x23105d(0x11b)](_0x23105d(0xdb))?UpdateCategoryStatus(_0x2251e7,!![]):UpdateCategoryStatus(_0x2251e7,![]);});}function AddNewCategory(_0x51df7a){var _0x3ac4fa=a0_0x2fdde6,_0x570f16=_0x3ac4fa(0xf6),_0x21d9f4=GetItemTypeForListName(_0x570f16),_0xb7476b;_0xb7476b={'__metadata':{'type':_0x21d9f4},'Status':!![],'Title':$(_0x3ac4fa(0x106))['val']()[_0x3ac4fa(0x111)](),'PublishedCounter':'0','PendingCounter':'0','DraftCounter':'0'},$['when'](AddItemToList(_0x570f16,_0xb7476b))[_0x3ac4fa(0x131)](function(_0x2759b5){var _0x1e8c32=_0x3ac4fa;$(_0x1e8c32(0x11c))[_0x1e8c32(0x108)](_0x1e8c32(0xce)),$(_0x1e8c32(0x106))[_0x1e8c32(0xfb)](''),GetAllCategory(currentDepartnemtUrls),alert(_0x1e8c32(0x128));})[_0x3ac4fa(0xd7)](function(){var _0x5b5c6b=_0x3ac4fa;console[_0x5b5c6b(0xde)](_0x5b5c6b(0xd6));});;}function UpdateCategory(_0x35fb3b){var _0x139e7d=a0_0x2fdde6,_0xffcc9a=_0x139e7d(0xf6),_0x4f08fe=GetItemTypeForListName(_0xffcc9a),_0x1bfd56;_0x1bfd56={'__metadata':{'type':_0x4f08fe},'Title':$(_0x139e7d(0x106))[_0x139e7d(0xfb)]()[_0x139e7d(0x111)]()},$[_0x139e7d(0xef)](updateItemWithID(_0xffcc9a,_0x1bfd56,_0x35fb3b))[_0x139e7d(0x131)](function(_0x36325d){var _0x2d7433=_0x139e7d;$(_0x2d7433(0x11c))[_0x2d7433(0x108)](_0x2d7433(0xce)),$(_0x2d7433(0x106))[_0x2d7433(0xfb)](''),GetAllCategory(currentDepartnemtUrls),alert('Category\x20has\x20been\x20updated\x20successfully.');})[_0x139e7d(0xd7)](function(){var _0x5a3da6=_0x139e7d;console[_0x5a3da6(0xde)]('Error\x20in\x20Category\x20Topic.');});;}function UpdateCategoryStatus(_0x30251a,_0xe8b9b2){var _0x397af5=a0_0x2fdde6,_0x7ba402=_0x397af5(0xf6),_0x436116=GetItemTypeForListName(_0x7ba402),_0x24a4c6;_0x24a4c6={'__metadata':{'type':_0x436116},'Status':_0xe8b9b2},$[_0x397af5(0xef)](updateItemWithID(_0x7ba402,_0x24a4c6,_0x30251a))[_0x397af5(0x131)](function(_0xa0455c){})[_0x397af5(0xd7)](function(){console['log']('Error\x20in\x20Category\x20Topic.');});;}function CategoryNameValidation(_0x11dbf2,_0x47d6c9){var _0xc76cdd=a0_0x2fdde6,_0x23954c=0x0,_0x242e5e='';_0x47d6c9==''||_0x47d6c9==null?_0x242e5e=_0xc76cdd(0x121)+_0x11dbf2+'\x27':_0x242e5e=_0xc76cdd(0x121)+_0x11dbf2+_0xc76cdd(0x124)+_0x47d6c9+'\x27';var _0x1ba30f=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x242e5e;return $[_0xc76cdd(0x135)]({'url':_0x1ba30f,'headers':{'Accept':_0xc76cdd(0x10d)},'async':![],'success':function(_0x333b02){var _0x1ab6f2=_0xc76cdd,_0x46c3da=_0x333b02['d'][_0x1ab6f2(0xf4)];_0x23954c=_0x46c3da[_0x1ab6f2(0x103)];},'eror':function(_0x21fa16){var _0x213ce8=_0xc76cdd;console['log'](_0x213ce8(0xd4));}}),_0x23954c;}function GetAllCategory(_0x4aa36c){var _0x2ea2e9=a0_0x2fdde6,_0x34d56f=_0x2ea2e9(0x118);isCurrentUserAuthorizedtoKnowledgeAdmin!=!![]&&(_0x34d56f=_0x34d56f+_0x2ea2e9(0x137));var _0x41f100=_0x4aa36c+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select='+_0x34d56f;$['ajax']({'url':_0x41f100,'headers':{'Accept':_0x2ea2e9(0x10d)},'async':![],'success':function(_0x3fb93e){var _0x26675e=_0x2ea2e9,_0x4f6897=_0x3fb93e['d'][_0x26675e(0xf4)],_0x56d590='';_0x56d590+=_0x26675e(0x13f),_0x56d590+='<thead>',_0x56d590+=_0x26675e(0xff),_0x56d590+=_0x26675e(0x112),_0x56d590+=_0x26675e(0x132),_0x56d590+='<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Draft\x22>Draft</th>',_0x56d590+=_0x26675e(0x12e);isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x56d590+=_0x26675e(0x114),_0x56d590+='<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Action\x22>Action</th>');_0x56d590+='</tr>',_0x56d590+=_0x26675e(0xdd),_0x56d590+=_0x26675e(0xed);for(var _0x5af556=0x0;_0x5af556<_0x4f6897[_0x26675e(0x103)];_0x5af556++){var _0x58117e=_0x4f6897[_0x5af556]['Title'],_0x5b23b8=_0x4f6897[_0x5af556]['Status'],_0x528d88='';_0x5b23b8==!![]&&(_0x528d88=_0x26675e(0xdb));var _0x19a98a=new Date(_0x4f6897[_0x5af556]['Modified']),_0x305ba7=_0x4f6897[_0x5af556][_0x26675e(0xee)];_0x305ba7==null&&(_0x305ba7=0x0);var _0x35d9ab=_0x4f6897[_0x5af556][_0x26675e(0x122)];_0x35d9ab==null&&(_0x35d9ab=0x0);var _0x3bb2b3=_0x4f6897[_0x5af556][_0x26675e(0xe9)];_0x3bb2b3==null&&(_0x3bb2b3=0x0);var _0x52d5f4=_0x4f6897[_0x5af556][_0x26675e(0x120)];_0x56d590+=_0x26675e(0xff),_0x56d590+=_0x26675e(0x10c)+_0x4f6897[_0x5af556]['ID']+_0x26675e(0xea)+_0x58117e+'<a></td>',_0x56d590+=_0x26675e(0xd5)+_0x305ba7+_0x26675e(0xec),_0x56d590+='<td>'+_0x35d9ab+_0x26675e(0xec),_0x305ba7+_0x35d9ab+_0x3bb2b3==0x0?_0x56d590+=_0x26675e(0x113):_0x56d590+='<td>'+ShowCommonDateFormat(_0x19a98a)+_0x26675e(0xec),isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x56d590+=_0x26675e(0xd5),_0x56d590+=_0x26675e(0x11f),_0x56d590+=_0x26675e(0xf9)+_0x4f6897[_0x5af556]['ID']+_0x26675e(0x10a)+_0x528d88+'>',_0x56d590+=_0x26675e(0xfe),_0x56d590+=_0x26675e(0xf0)+_0x4f6897[_0x5af556]['ID']+_0x26675e(0x10b)+escape(_0x58117e)+'\x22)><i\x20class=\x22fa\x20fa-edit\x22></i></a></span>',_0x305ba7+_0x35d9ab+_0x3bb2b3==0x0&&(_0x56d590+=_0x26675e(0x130)+_0x4f6897[_0x5af556]['ID']+_0x26675e(0x102)),_0x56d590+=_0x26675e(0xec)),_0x56d590+=_0x26675e(0x12b);}_0x56d590+=_0x26675e(0xf8),_0x56d590+=_0x26675e(0xf7),$(_0x26675e(0xe3))['html'](''),$(_0x26675e(0xe3))[_0x26675e(0x117)](_0x56d590),BindStatusChangeEvent();},'eror':function(_0x318586){var _0x45aa4d=_0x2ea2e9;console[_0x45aa4d(0xde)]('error');}});}function GetDepartmentUrl(_0x21463d,_0x3ba1fa){var _0x2e5b54=a0_0x2fdde6,_0x5c5738=_spPageContextInfo[_0x2e5b54(0x123)]+_0x2e5b54(0xd1)+_0x3ba1fa+'\x27';$['ajax']({'url':_0x5c5738,'headers':{'Accept':'application/json;odata=verbose'},'async':!![],'success':function(_0x2a2623){var _0xb48ff8=_0x2e5b54,_0x4ae43f=_0x2a2623['d']['results'];if(_0x4ae43f[_0xb48ff8(0x103)]>0x0){currentDepartnemtUrls=_0x4ae43f[0x0][_0xb48ff8(0x11d)];var _0x23bc62=_0x4ae43f[0x0][_0xb48ff8(0x105)];$(_0xb48ff8(0x13e))[_0xb48ff8(0x13a)](_0x23bc62),GetAllCategory(currentDepartnemtUrls);}},'eror':function(_0x2c2fc1){var _0x11df61=_0x2e5b54;console[_0x11df61(0xde)]($(_0x11df61(0x107))[_0x11df61(0xfb)]());}});}function updateItemWithID(_0x53788d,_0x5de725,_0x255d05){var _0x735737=a0_0x2fdde6,_0x4c2948=$[_0x735737(0x100)]();return $[_0x735737(0x135)]({'url':currentDepartnemtUrls+_0x735737(0x126)+_0x53788d+'\x27)/GetItemById(\x27'+_0x255d05+'\x27)','type':_0x735737(0x104),'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$(_0x735737(0x139))['val'](),'content-Type':'application/json;odata=verbose','X-Http-Method':_0x735737(0xf3),'If-Match':'*'},'data':JSON[_0x735737(0x109)](_0x5de725),'async':![],'success':function(_0x2d6283){var _0x29f311=_0x735737;_0x4c2948[_0x29f311(0x13b)](!![]);},'error':function(_0x16849b){var _0xbb8e2f=_0x735737;alert(JSON['stringify'](_0x16849b)),_0x4c2948[_0xbb8e2f(0xd9)](_0x16849b);}}),_0x4c2948[_0x735737(0xe7)]();}function GetItemTypeForListName(_0x35ca5a){var _0x2e6f63=a0_0x2fdde6;return _0x2e6f63(0xfd)+_0x35ca5a[_0x2e6f63(0xda)](0x0)[_0x2e6f63(0x115)]()+_0x35ca5a['split']('\x20')[_0x2e6f63(0xdf)]('')[_0x2e6f63(0x110)](0x1)+_0x2e6f63(0x11e);}function AddItemToList(_0x2ebc3c,_0x250c1f){var _0x5b99bc=a0_0x2fdde6,_0x2a165f=$[_0x5b99bc(0x100)]();restQuery='ID';var _0x546370=currentDepartnemtUrls+_0x5b99bc(0x126)+_0x2ebc3c+'\x27)/items?$select='+restQuery;return $[_0x5b99bc(0x135)]({'url':_0x546370,'type':_0x5b99bc(0x104),'async':![],'headers':{'accept':_0x5b99bc(0x10d),'X-RequestDigest':$(_0x5b99bc(0x139))[_0x5b99bc(0xfb)](),'content-Type':_0x5b99bc(0x10d)},'data':JSON[_0x5b99bc(0x109)](_0x250c1f),'success':function(_0xa11ec1){var _0x1624f6=_0x5b99bc,_0x1637ea=_0xa11ec1['d']['ID'];_0x2a165f[_0x1624f6(0x13b)](_0xa11ec1);},'error':function(_0x1de5e4){alert(JSON['stringify'](_0x1de5e4)),_0x2a165f['reject'](_0x1de5e4);}}),_0x2a165f[_0x5b99bc(0xe7)]();}function DeleteItemCategory(_0x32bf1e){var _0x5b9e14=a0_0x2fdde6,_0x524e0b=confirm(_0x5b9e14(0xd2));if(_0x524e0b==!![]){var _0x417f6c=$[_0x5b9e14(0x100)](),_0x425a32=currentDepartnemtUrls+'/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items('+_0x32bf1e+')';return $[_0x5b9e14(0x135)]({'url':_0x425a32,'type':_0x5b9e14(0xe6),'contentType':_0x5b9e14(0x10d),'headers':{'Accept':_0x5b9e14(0x10d),'X-RequestDigest':$('#__REQUESTDIGEST')[_0x5b9e14(0xfb)](),'IF-MATCH':'*','X-HTTP-Method':_0x5b9e14(0xe6)},'success':function(_0x22ba97){var _0x3cee29=_0x5b9e14;GetAllCategory(currentDepartnemtUrls),_0x417f6c[_0x3cee29(0x13b)](_0x22ba97);},'error':function(_0x476378){var _0xce67c0=_0x5b9e14;_0x417f6c[_0xce67c0(0xd9)](JSON[_0xce67c0(0x109)](_0x476378));}}),_0x417f6c[_0x5b9e14(0xe7)]();}}function OpenUpdateModalPopup(_0x5c4ca2,_0x433d79){var _0x131911=a0_0x2fdde6;categoryId=_0x5c4ca2,_0x433d79=unescape(_0x433d79),$(_0x131911(0x106))[_0x131911(0xfb)](_0x433d79),$(_0x131911(0x11c))[_0x131911(0x108)](_0x131911(0xe4));}function RedirectOnCategoryTopics(_0x55ccc6){var _0x43a563=a0_0x2fdde6;departmentID>0x0&&(document[_0x43a563(0x11a)][_0x43a563(0xfa)]='../Pages/Topics.aspx?WebAppId=232&DepartmentId='+departmentID+_0x43a563(0x13c)+_0x55ccc6+_0x43a563(0x134));}function GetParameterValues(_0x1b5c4e){var _0x3237bd=a0_0x2fdde6,_0x3e5852=window[_0x3237bd(0x11a)][_0x3237bd(0xfa)][_0x3237bd(0x110)](window[_0x3237bd(0x11a)][_0x3237bd(0xfa)][_0x3237bd(0xe1)]('?')+0x1)[_0x3237bd(0x129)]('&');for(var _0x412def=0x0;_0x412def<_0x3e5852[_0x3237bd(0x103)];_0x412def++){var _0x3f75fc=_0x3e5852[_0x412def][_0x3237bd(0x129)]('=');if(_0x3f75fc[0x0]==_0x1b5c4e)return _0x3f75fc[0x1];}}