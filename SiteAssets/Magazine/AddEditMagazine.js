var a0_0x47e848=a0_0x2ddf;(function(_0xb632a,_0x48e546){var _0x195e9e=a0_0x2ddf,_0x2ab38f=_0xb632a();while(!![]){try{var _0x30b22e=-parseInt(_0x195e9e(0xa3))/0x1*(parseInt(_0x195e9e(0x91))/0x2)+-parseInt(_0x195e9e(0xba))/0x3*(-parseInt(_0x195e9e(0x99))/0x4)+parseInt(_0x195e9e(0xa4))/0x5+parseInt(_0x195e9e(0xda))/0x6+parseInt(_0x195e9e(0x98))/0x7*(parseInt(_0x195e9e(0xb3))/0x8)+parseInt(_0x195e9e(0x96))/0x9*(-parseInt(_0x195e9e(0xcc))/0xa)+-parseInt(_0x195e9e(0xdc))/0xb*(parseInt(_0x195e9e(0xde))/0xc);if(_0x30b22e===_0x48e546)break;else _0x2ab38f['push'](_0x2ab38f['shift']());}catch(_0x51f9b7){_0x2ab38f['push'](_0x2ab38f['shift']());}}}(a0_0x48b6,0xf3b81));var itemid='';$(document)[a0_0x47e848(0x93)](function(){var _0x2d78c4=a0_0x47e848;$('#Submit')[_0x2d78c4(0xb9)](function(){FindDuplicate();});});function FindDuplicate(){var _0x5cdfa7=a0_0x47e848,_0x6c9af=titanForWork[_0x5cdfa7(0xab)](_0x5cdfa7(0x9b)),_0x343eb5=![],_0x5e32cb=$('#input2')[_0x5cdfa7(0xd5)](),_0x18d335=$(_0x5cdfa7(0x9f))[_0x5cdfa7(0xd5)](),_0x55ab6e=$(_0x5cdfa7(0xb2))[_0x5cdfa7(0xd5)]();if(_0x5e32cb['trim']()['length']==0x0||_0x18d335['trim']()[_0x5cdfa7(0xd0)]==0x0)return alert(_0x5cdfa7(0xb5)),![];var _0x5e620a=_0x6c9af+_0x5cdfa7(0xd4)+_0x5e32cb+'\x27)\x20and\x20(Publish_Date\x20eq\x20\x27'+_0x18d335+_0x5cdfa7(0xa6);return itemid!=null&&(_0x5e620a=_0x6c9af+_0x5cdfa7(0xd4)+_0x5e32cb+'\x27)\x20and\x20(Publish_Date\x20eq\x20\x27'+_0x18d335+_0x5cdfa7(0xbb)+itemid+_0x5cdfa7(0xcb)),$['ajax']({'url':_0x5e620a,'type':_0x5cdfa7(0xbc),'cache':!![],'async':![],'headers':{'ACCEPT':_0x5cdfa7(0xaf)},'success':function(_0x40056c){var _0x3aa3ee=_0x5cdfa7;$(_0x40056c['d'][_0x3aa3ee(0xb1)])[_0x3aa3ee(0xd0)]==0x0?(_0x343eb5=!![],AddCurrentUserasTechAdmin()):alert(_0x3aa3ee(0xb0));},'error':function(){}}),_0x343eb5;}function AddCurrentUserasTechAdmin(){var _0x5be8e2=a0_0x47e848,_0x3a7c45=$('#input2')['val']()['trim'](),_0x193317=$(_0x5be8e2(0x9f))[_0x5be8e2(0xd5)](),_0x2490f4=$(_0x5be8e2(0xb2))['val']()[_0x5be8e2(0xe0)](),_0x14fb0b=new Date(_0x193317),_0x9a4270=_0x14fb0b[_0x5be8e2(0xb7)](),_0x4ec441=_0x14fb0b[_0x5be8e2(0xe4)]()+0x1,_0x567f0a=_0x14fb0b[_0x5be8e2(0x90)](),_0x23b1b0=new Array();_0x23b1b0[_0x5be8e2(0xe1)]();(_0x3a7c45==''||_0x193317=='')&&alert(_0x5be8e2(0xb8));var _0x2b64c1='Magazine_Items',_0x3dac88,_0x665cdc=_0x5be8e2(0xa0);_0x3dac88={'__metadata':{'type':_0x665cdc},'Title':_0x3a7c45,'Publish_Date':_0x193317,'Volume':_0x2490f4,'Month':_0x4ec441[_0x5be8e2(0xc6)](),'Year':_0x567f0a[_0x5be8e2(0xc6)]()};if(itemid==''){if($(_0x5be8e2(0xe3))[_0x5be8e2(0xd5)]()=='')return alert('Please\x20attach\x20a\x20cover.\x20'),![];if($(_0x5be8e2(0x9a))[_0x5be8e2(0xd5)]()=='')return alert(_0x5be8e2(0x9e)),![];$['when'](AddItemToList(_0x2b64c1,_0x3dac88))['done'](function(_0x2a86b7){var _0x2ffd48=_0x5be8e2;AddAttachments(_0x2a86b7['d']['Id']),alert(_0x2ffd48(0xac)),$(_0x2ffd48(0xc2))[_0x2ffd48(0xd5)](''),$('#input1')[_0x2ffd48(0xd5)](''),$(_0x2ffd48(0xb2))[_0x2ffd48(0xd5)](''),location['href']=_0x2ffd48(0xc7);});}else $[_0x5be8e2(0x8e)](updateMagazineItemWithID(_0x2b64c1,_0x3dac88,itemid))[_0x5be8e2(0xc8)](function(_0x391b17){var _0x3996e1=_0x5be8e2;checkFileExists(itemid),alert(_0x3996e1(0xdb)),$(_0x3996e1(0xa2))['hide'](),$(_0x3996e1(0xc2))[_0x3996e1(0xd5)](''),$(_0x3996e1(0x9f))[_0x3996e1(0xd5)](''),$(_0x3996e1(0xb2))[_0x3996e1(0xd5)](''),location[_0x3996e1(0xdd)]='../Pages/MagazineViewAll.aspx?WebAppId=12';});}function updateMagazineItemWithID(_0x2b7d54,_0x16c1da,_0x5b0a21){var _0x338991=a0_0x47e848,_0xd2cf55=titanForWork['getQueryStringParameter'](_0x338991(0x9b)),_0x201ec8=$[_0x338991(0xa8)]();return $['ajax']({'url':_0xd2cf55+_0x338991(0xe2)+_0x2b7d54+_0x338991(0xb4)+_0x5b0a21+'\x27)','type':'POST','headers':{'accept':_0x338991(0xaf),'X-RequestDigest':$('#__REQUESTDIGEST')[_0x338991(0xd5)](),'content-Type':_0x338991(0xaf),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x338991(0x95)](_0x16c1da),'async':![],'success':function(_0x18f8c2){var _0x5af0d=_0x338991;_0x201ec8[_0x5af0d(0xb6)](!![]);},'error':function(_0x32f443){alert(JSON['stringify'](_0x32f443)),_0x201ec8['reject'](_0x32f443);}}),_0x201ec8[_0x338991(0x8d)]();}function AddItemToList(_0x549a71,_0x4a20e9){var _0x42d433=a0_0x47e848,_0x5d7297=titanForWork['getQueryStringParameter'](_0x42d433(0x9b)),_0x2a904f=$['Deferred']();return $['ajax']({'url':_0x5d7297+_0x42d433(0xe2)+_0x549a71+_0x42d433(0xd7),'type':'POST','async':![],'headers':{'accept':_0x42d433(0xaf),'X-RequestDigest':$(_0x42d433(0xc3))[_0x42d433(0xd5)](),'content-Type':_0x42d433(0xaf)},'data':JSON[_0x42d433(0x95)](_0x4a20e9),'success':function(_0x5014ed){var _0x334bd5=_0x42d433;console[_0x334bd5(0x94)](_0x549a71),_0x2a904f[_0x334bd5(0xb6)](_0x5014ed);},'error':function(_0x451036){var _0xa97c72=_0x42d433;alert(_0xa97c72(0xca)+JSON[_0xa97c72(0x95)](_0x451036)),_0x2a904f[_0xa97c72(0xbf)](_0x451036);}}),_0x2a904f[_0x42d433(0x8d)]();}function a0_0x48b6(){var _0x58b149=['files','#input2','#__REQUESTDIGEST','/_api/web/lists/GetByTitle(\x27','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','toString','../Pages/MagazineViewAll.aspx?WebAppId=12','done','\x27)\x20\x20','Failure\x20:\x20','\x27&$expand=AttachmentFiles','40VHmqtt','application/json;\x20odata=verbose',')/AttachmentFiles/getByFileName(\x27','__REQUESTDIGEST','length','pop','FormDigestValue','DELETE','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','val','/_api/contextinfo','\x27)/items','webAbsoluteUrl','responseText','151200fktTsE','Updated\x20successfully.','3217038qwzRFI','href','96tsvNGs','result','trim','push','/_api/web/lists/getbytitle(\x27','#file1','getMonth','onload','getElementById','POST','error','promise','when','value','getFullYear','254AvDSvF','readAsArrayBuffer','ready','log','stringify','66447EIgRAp','ajax','3457727sifZyB','24784TUXudg','#file2','CompanySiteUrl','Save\x20img','Volume','Please\x20attach\x20a\x20magazine.\x20','#input1','SP.Data.Magazine_x005f_ItemsListItem','Error\x20occured.','#mazinemodle','1699IHfQFS','8225985hJeuTE','\x27)/AttachmentFiles/\x20add(FileName=\x27','\x27))&$expand=AttachmentFiles','FileName','Deferred','Attachments','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','getQueryStringParameter','Added\x20successfully.','modal','target','application/json;odata=verbose','Duplicate\x20Magazine\x20found.','results','#input','8eUARMU','\x27)/GetItemById(\x27','Please\x20fill\x20all\x20required\x20fields.','resolve','getDate','Fill\x20all\x20mandatory\x20fields!','click','687iVRxmR','\x27))and\x20ID\x20ne\x20\x27','GET','GetContextWebInformation','name','reject','AttachmentFiles'];a0_0x48b6=function(){return _0x58b149;};return a0_0x48b6();}function AddAttachments(_0x1b7700){var _0x6cb4bf=a0_0x47e848,_0x3fc639=titanForWork[_0x6cb4bf(0xab)](_0x6cb4bf(0x9b)),_0x17b69a='';$[_0x6cb4bf(0x97)]({'url':_spPageContextInfo[_0x6cb4bf(0xd8)]+_0x6cb4bf(0xd6),'method':_0x6cb4bf(0xe7),'async':![],'headers':{'ACCEPT':_0x6cb4bf(0xaf),'content-type':_0x6cb4bf(0xaf)},'success':function(_0x5ce883){var _0x113c0d=_0x6cb4bf;_0x17b69a=_0x5ce883['d'][_0x113c0d(0xbd)][_0x113c0d(0xd2)];},'error':function(_0x19bd80){}})[_0x6cb4bf(0xc8)](function(){var _0x56c91f=_0x6cb4bf,_0x218c10=$(_0x56c91f(0xe3)),_0x4e333d=$(_0x56c91f(0xe3))[_0x56c91f(0xd5)]();if(_0x4e333d[_0x56c91f(0xd0)]>0x0){var _0x53056d=_0x218c10[0x0][_0x56c91f(0xc1)][0x0]['name'],_0x36790c=new FileReader();_0x36790c[_0x56c91f(0xe5)]=function(_0x560d90){var _0x23109f=_0x56c91f,_0x575bf9=_0x560d90[_0x23109f(0xae)]['result'],_0x2f9284=$['ajax']({'url':_0x3fc639+_0x23109f(0xaa)+_0x1b7700+_0x23109f(0xa5)+_0x53056d+'\x27)','method':_0x23109f(0xe7),'binaryStringRequestBody':!![],'data':_0x575bf9,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x17b69a},'success':function(_0x19ce03){var _0x2b0571=_0x23109f;console['log'](_0x2b0571(0x9c));},'error':function(_0x2f8739){var _0x372ed2=_0x23109f;alert(_0x372ed2(0xa1)+_0x2f8739[_0x372ed2(0xd9)]);}});};};_0x4e333d[_0x56c91f(0xd0)]>0x1&&_0x36790c['readAsArrayBuffer'](_0x218c10[0x0][_0x56c91f(0xc1)][0x0]);})[_0x6cb4bf(0xc8)](function(){var _0x5169c8=_0x6cb4bf;debugger;var _0x19b69a=$(_0x5169c8(0x9a)),_0x50480b=$(_0x5169c8(0x9a))[_0x5169c8(0xd5)]();if(_0x50480b[_0x5169c8(0xd0)]>0x1){var _0x4e9704=_0x19b69a[0x0][_0x5169c8(0xc1)][0x0][_0x5169c8(0xbe)],_0x5f3639=new FileReader();_0x5f3639[_0x5169c8(0xe5)]=function(_0x3bc5ea){var _0xd9c025=_0x5169c8,_0x342ec8=_0x3bc5ea[_0xd9c025(0xae)][_0xd9c025(0xdf)],_0x4e77ff=$[_0xd9c025(0x97)]({'url':_0x3fc639+'/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27'+_0x1b7700+_0xd9c025(0xa5)+_0x4e9704+'\x27)','method':_0xd9c025(0xe7),'binaryStringRequestBody':!![],'data':_0x342ec8,'processData':![],'async':![],'headers':{'ACCEPT':_0xd9c025(0xaf),'X-RequestDigest':_0x17b69a},'success':function(_0x3c0f58){console['log']('Save\x20pdf'+_0x3c0f58);},'error':function(_0x3c8ba0){var _0x3374b0=_0xd9c025;alert('Error\x20occured.'+_0x3c8ba0[_0x3374b0(0xd9)]);}});};};_0x50480b[_0x5169c8(0xd0)]>0x1&&_0x5f3639[_0x5169c8(0x92)](_0x19b69a[0x0]['files'][0x0]);});}function a0_0x2ddf(_0x470561,_0x181993){var _0x48b61e=a0_0x48b6();return a0_0x2ddf=function(_0x2ddf10,_0x41406a){_0x2ddf10=_0x2ddf10-0x8d;var _0x4babae=_0x48b61e[_0x2ddf10];return _0x4babae;},a0_0x2ddf(_0x470561,_0x181993);}function BindMagazine(_0x26ee76){var _0x2e2b90=a0_0x47e848;debugger;$(_0x2e2b90(0xa2))[_0x2e2b90(0xad)](),itemid=_0x26ee76;var _0x457792=titanForWork[_0x2e2b90(0xab)](_0x2e2b90(0x9b)),_0x4938ec='';_0x4938ec='ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27'+itemid+'\x27';var _0x2f259=_0x457792+_0x2e2b90(0xc5)+_0x4938ec;$[_0x2e2b90(0x97)]({'url':_0x2f259,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x914f2b){var _0x3bf1a6=_0x2e2b90,_0x14f074=_0x914f2b['d'][_0x3bf1a6(0xb1)];for(var _0x11fd16=0x0;_0x11fd16<_0x14f074['length'];_0x11fd16++){var _0x1d0f2c=new Date(_0x14f074[_0x11fd16]['Publish_Date']),_0x528375=_0x1d0f2c[_0x3bf1a6(0xb7)](),_0x5aeaf1=_0x1d0f2c[_0x3bf1a6(0xe4)]()+0x1,_0x4996d7=_0x1d0f2c[_0x3bf1a6(0x90)](),_0x407ee4=_0x5aeaf1+'/'+_0x528375+'/'+_0x4996d7,_0x5552fb=_0x14f074[_0x11fd16]['Title'],_0x4c08ae=_0x407ee4[_0x3bf1a6(0xc6)](),_0x2879ca=_0x14f074[_0x11fd16][_0x3bf1a6(0x9d)];$('#input2')[_0x3bf1a6(0xd5)](_0x5552fb),$('#input1')[_0x3bf1a6(0xd5)](_0x4c08ae),$('#input')['val'](_0x2879ca);}},'eror':function(_0x2c6a04){var _0x386142=_0x2e2b90;console['log'](_0x386142(0xe8));}});}function checkFileExists(_0x5256d0){var _0x1e94a1=a0_0x47e848;Handler=this;var _0x4730af='',_0x2e4179=titanForWork[_0x1e94a1(0xab)]('CompanySiteUrl');$[_0x1e94a1(0x97)]({'url':_0x2e4179+'/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27'+_0x5256d0+'\x27)?$select=*&$expand=AttachmentFiles','method':'GET','headers':{'Accept':_0x1e94a1(0xcd)},'async':![],'success':function(_0x105a65){var _0x326645=_0x1e94a1,_0x4fe49d=_0x105a65['d'];if(_0x105a65['d'][_0x326645(0xa9)]==!![])for(var _0xcc440e=0x0;_0xcc440e<_0x105a65['d']['AttachmentFiles'][_0x326645(0xb1)][_0x326645(0xd0)];_0xcc440e++){var _0x37e16a=$(_0x326645(0xe3))['val'](),_0x5acb97=$(_0x326645(0x9a))[_0x326645(0xd5)](),_0x49c2dc=_0x105a65['d'][_0x326645(0xc0)][_0x326645(0xb1)][_0xcc440e][_0x326645(0xa7)],_0x4acca8=_0x49c2dc['split']('.')[_0x326645(0xd1)]();_0x4acca8=='pdf'?_0x5acb97[_0x326645(0xd0)]>0x0&&DeleteFile(_0x5256d0,_0x105a65['d'][_0x326645(0xc0)]['results'][_0xcc440e][_0x326645(0xa7)]):_0x37e16a[_0x326645(0xd0)]>0x0&&DeleteFile(_0x5256d0,_0x105a65['d'][_0x326645(0xc0)][_0x326645(0xb1)][_0xcc440e][_0x326645(0xa7)]);}AddAttachments(_0x5256d0);},'error':function(_0x449711){}});}function DeleteFile(_0x71dbe0,_0x53805a){var _0xed45fe=a0_0x47e848;Handler=this;var _0x1cef57='Magazine_items',_0x5d60b9=titanForWork[_0xed45fe(0xab)]('CompanySiteUrl');$[_0xed45fe(0x97)]({'url':_0x5d60b9+_0xed45fe(0xc4)+_0x1cef57+'\x27)/GetItemById('+_0x71dbe0+_0xed45fe(0xce)+_0x53805a+_0xed45fe(0xc9),'method':_0xed45fe(0xd3),'async':![],'headers':{'X-RequestDigest':document[_0xed45fe(0xe6)](_0xed45fe(0xcf))[_0xed45fe(0x8f)]},'success':function(_0x48089f){},'error':function(_0x522e04){}});}function ClearFields(){var _0x59fc2f=a0_0x47e848;$(_0x59fc2f(0xc2))[_0x59fc2f(0xd5)](''),$('#input1')[_0x59fc2f(0xd5)](''),$(_0x59fc2f(0xb2))[_0x59fc2f(0xd5)]('');}