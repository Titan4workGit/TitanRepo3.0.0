const a0_0x15495d=a0_0x1190;function a0_0x1190(_0x48411f,_0x2712be){const _0x492fa0=a0_0x492f();return a0_0x1190=function(_0x1190a7,_0x2a8605){_0x1190a7=_0x1190a7-0x84;let _0x4b84f1=_0x492fa0[_0x1190a7];return _0x4b84f1;},a0_0x1190(_0x48411f,_0x2712be);}(function(_0x3c3974,_0x5e8bea){const _0x51aeb1=a0_0x1190,_0x216abc=_0x3c3974();while(!![]){try{const _0x46d6ff=-parseInt(_0x51aeb1(0xb8))/0x1*(-parseInt(_0x51aeb1(0xa7))/0x2)+parseInt(_0x51aeb1(0x84))/0x3*(parseInt(_0x51aeb1(0xa9))/0x4)+-parseInt(_0x51aeb1(0x98))/0x5*(parseInt(_0x51aeb1(0xaa))/0x6)+-parseInt(_0x51aeb1(0x9e))/0x7*(-parseInt(_0x51aeb1(0x9c))/0x8)+parseInt(_0x51aeb1(0x91))/0x9*(parseInt(_0x51aeb1(0xb3))/0xa)+-parseInt(_0x51aeb1(0xa5))/0xb*(-parseInt(_0x51aeb1(0xa2))/0xc)+-parseInt(_0x51aeb1(0x88))/0xd;if(_0x46d6ff===_0x5e8bea)break;else _0x216abc['push'](_0x216abc['shift']());}catch(_0x248c28){_0x216abc['push'](_0x216abc['shift']());}}}(a0_0x492f,0x3c20f));import{__awaiter}from'tslib';import{RequestMethod}from'../RequestMethod';import{MiddlewareControl}from'./MiddlewareControl';import{getRequestHeader,setRequestHeader}from'./MiddlewareUtil';import{RetryHandlerOptions}from'./options/RetryHandlerOptions';import{FeatureUsageFlag,TelemetryHandlerOptions}from'./options/TelemetryHandlerOptions';export class RetryHandler{constructor(_0x5fcc6d=new RetryHandlerOptions()){const _0x27c5e1=a0_0x1190;this[_0x27c5e1(0x9a)]=_0x5fcc6d;}[a0_0x15495d(0xa1)](_0x2f967d){const _0x1149bb=a0_0x15495d;return RetryHandler[_0x1149bb(0x86)]['indexOf'](_0x2f967d[_0x1149bb(0x8a)])!==-0x1;}[a0_0x15495d(0xa0)](_0x3ab7bd,_0x346d0d){const _0x5175b0=a0_0x15495d,_0x24b6cd=typeof _0x3ab7bd==='string'?_0x346d0d[_0x5175b0(0xb6)]:_0x3ab7bd['method'],_0x516e99=_0x24b6cd===RequestMethod[_0x5175b0(0x89)]||_0x24b6cd===RequestMethod[_0x5175b0(0x96)]||_0x24b6cd===RequestMethod[_0x5175b0(0xa6)];if(_0x516e99){const _0x6b8c7a=getRequestHeader(_0x3ab7bd,_0x346d0d,_0x5175b0(0x9f))===_0x5175b0(0xa8);if(_0x6b8c7a)return![];}return!![];}[a0_0x15495d(0x94)](_0x45a022,_0x20fa7b,_0x524891){const _0x449aae=a0_0x15495d,_0x487c50=()=>Number(Math['random']()[_0x449aae(0x93)](0x3)),_0xd7c5e9=_0x45a022[_0x449aae(0xb2)]!==undefined?_0x45a022[_0x449aae(0xb2)][_0x449aae(0x9b)](RetryHandler[_0x449aae(0xad)]):null;let _0x1a454e;return _0xd7c5e9!==null?Number['isNaN'](Number(_0xd7c5e9))?_0x1a454e=Math[_0x449aae(0x9d)]((new Date(_0xd7c5e9)[_0x449aae(0x8c)]()-Date[_0x449aae(0xb7)]())/0x3e8):_0x1a454e=Number(_0xd7c5e9):_0x1a454e=_0x20fa7b>=0x2?this[_0x449aae(0x8f)](_0x20fa7b)+_0x524891+_0x487c50():_0x524891+_0x487c50(),Math[_0x449aae(0xa3)](_0x1a454e,this[_0x449aae(0x9a)][_0x449aae(0xb4)]()+_0x487c50());}[a0_0x15495d(0x8f)](_0x275fc7){const _0x5ba4a9=a0_0x15495d;return Math[_0x5ba4a9(0x9d)](0x1/0x2*(Math[_0x5ba4a9(0x92)](0x2,_0x275fc7)-0x1));}[a0_0x15495d(0x99)](_0x1ba031){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x16b2f7=_0x1ba031*0x3e8;return new Promise(_0x192916=>setTimeout(_0x192916,_0x16b2f7));});}[a0_0x15495d(0xb1)](_0x8c22d6){const _0xd7d032=a0_0x15495d;let _0x18e632;return _0x8c22d6['middlewareControl']instanceof MiddlewareControl&&(_0x18e632=_0x8c22d6[_0xd7d032(0xb0)][_0xd7d032(0x90)](this[_0xd7d032(0x9a)][_0xd7d032(0x95)])),typeof _0x18e632===_0xd7d032(0x8b)&&(_0x18e632=Object[_0xd7d032(0x87)](new RetryHandlerOptions(),this[_0xd7d032(0x9a)])),_0x18e632;}[a0_0x15495d(0xac)](_0x523239,_0x25c686,_0x5700c7){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d77cb=a0_0x1190;yield this[_0x4d77cb(0x8d)][_0x4d77cb(0xae)](_0x523239);if(_0x25c686<_0x5700c7['maxRetries']&&this['isRetry'](_0x523239[_0x4d77cb(0xb9)])&&this[_0x4d77cb(0xa0)](_0x523239[_0x4d77cb(0x97)],_0x523239[_0x4d77cb(0x9a)])&&_0x5700c7[_0x4d77cb(0xaf)](_0x5700c7[_0x4d77cb(0xab)],_0x25c686,_0x523239['request'],_0x523239[_0x4d77cb(0x9a)],_0x523239[_0x4d77cb(0xb9)])){++_0x25c686,setRequestHeader(_0x523239[_0x4d77cb(0x97)],_0x523239[_0x4d77cb(0x9a)],RetryHandler['RETRY_ATTEMPT_HEADER'],_0x25c686[_0x4d77cb(0x8e)]());const _0x23cbc4=this[_0x4d77cb(0x94)](_0x523239[_0x4d77cb(0xb9)],_0x25c686,_0x5700c7[_0x4d77cb(0xab)]);return yield this[_0x4d77cb(0x99)](_0x23cbc4),yield this[_0x4d77cb(0xac)](_0x523239,_0x25c686,_0x5700c7);}else return;});}[a0_0x15495d(0xae)](_0x17dff){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x169e32=a0_0x1190,_0x175ac9=0x0,_0x3f90e4=this['getOptions'](_0x17dff);return TelemetryHandlerOptions[_0x169e32(0xa4)](_0x17dff,FeatureUsageFlag['RETRY_HANDLER_ENABLED']),yield this['executeWithRetry'](_0x17dff,_0x175ac9,_0x3f90e4);});}[a0_0x15495d(0xb5)](_0x23dd4a){const _0x17be29=a0_0x15495d;this[_0x17be29(0x8d)]=_0x23dd4a;}}function a0_0x492f(){const _0x228a5e=['Content-Type','isBuffered','isRetry','421704iyxbjp','min','updateFeatureUsageFlag','33CFWwfG','POST','354924YeUwcB','application/octet-stream','5212rqSjzR','570dRZRkO','delay','executeWithRetry','RETRY_AFTER_HEADER','execute','shouldRetry','middlewareControl','getOptions','headers','1856450GhIkCj','getMaxDelay','setNext','method','now','1VjXbPs','response','822lGULie','RETRY_ATTEMPT_HEADER','RETRY_STATUS_CODES','assign','4611568kSGBsr','PUT','status','undefined','getTime','nextMiddleware','toString','getExponentialBackOffTime','getMiddlewareOptions','9ZFXkKG','pow','toFixed','getDelay','constructor','PATCH','request','14890BjotMm','sleep','options','get','1616HRpemQ','round','2023KqyOCZ'];a0_0x492f=function(){return _0x228a5e;};return a0_0x492f();}RetryHandler[a0_0x15495d(0x86)]=[0x1ad,0x1f7,0x1f8],RetryHandler[a0_0x15495d(0x85)]='Retry-Attempt',RetryHandler[a0_0x15495d(0xad)]='Retry-After';