'use strict';var a0_0x5d7355=a0_0x4807;function a0_0x4807(_0x4fe43a,_0x5257aa){var _0x39816b=a0_0x3981();return a0_0x4807=function(_0x480700,_0x1ba96c){_0x480700=_0x480700-0x1e8;var _0x3b7d7a=_0x39816b[_0x480700];return _0x3b7d7a;},a0_0x4807(_0x4fe43a,_0x5257aa);}(function(_0x46194e,_0x3bfc36){var _0x5c32f6=a0_0x4807,_0x5e5c08=_0x46194e();while(!![]){try{var _0xe5b9df=parseInt(_0x5c32f6(0x20f))/0x1+parseInt(_0x5c32f6(0x203))/0x2+parseInt(_0x5c32f6(0x1fa))/0x3+-parseInt(_0x5c32f6(0x1eb))/0x4+-parseInt(_0x5c32f6(0x204))/0x5*(-parseInt(_0x5c32f6(0x21b))/0x6)+-parseInt(_0x5c32f6(0x1fc))/0x7+parseInt(_0x5c32f6(0x228))/0x8*(-parseInt(_0x5c32f6(0x215))/0x9);if(_0xe5b9df===_0x3bfc36)break;else _0x5e5c08['push'](_0x5e5c08['shift']());}catch(_0x12b88d){_0x5e5c08['push'](_0x5e5c08['shift']());}}}(a0_0x3981,0x9a934));function a0_0x3981(){var _0x1cb6ff=['headers','options','generateUUID','prototype','random','__awaiter','1905350EaveBE','80ywOTuZ','nextMiddleware','request-id','MiddlewareControl','method','string','toString','stringify','MANUAL','./options/ChaosHandlerOptions','statusCode','23878VtnioG','createResponseHeaders','statusMessage','__esModule','createResponseBody','getRandomStatusCode','304263FmwSgP','test','responseBody','label','Date','getOptions','463452GWedhx','ChaosHandlerOptions','undefined','./options/ChaosHandlerData','ChaosStrategy','request','x-ms-ags-diagnostic','methodStatusCode','exec','get','append','chaosPercentage','retry-after','88OJuZrh','httpStatusCode','createResponse','length','manualMap','Strict-Transport-Security','2629372ZMHjMd','setNext','tslib','getRelativeURL','setStatusCode','sendRequest','floor','no-store','ChaosHandler','execute','defineProperty','__generator','./MiddlewareUtil','sent','chaosStrategy','107652vMthmh','middlewareControl','4101643egnBYL'];a0_0x3981=function(){return _0x1cb6ff;};return a0_0x3981();}Object[a0_0x5d7355(0x1f5)](exports,a0_0x5d7355(0x212),{'value':!![]}),exports['ChaosHandler']=void 0x0;var tslib_1=require(a0_0x5d7355(0x1ed)),MiddlewareControl_1=require('./MiddlewareControl'),MiddlewareUtil_1=require(a0_0x5d7355(0x1f7)),ChaosHandlerData_1=require(a0_0x5d7355(0x21e)),ChaosHandlerOptions_1=require(a0_0x5d7355(0x20d)),ChaosStrategy_1=require('./options/ChaosStrategy'),ChaosHandler=(function(){var _0x36c9c5=a0_0x5d7355;function _0x743614(_0x30fcaf,_0x1ed38e){var _0x42a121=a0_0x4807;_0x30fcaf===void 0x0&&(_0x30fcaf=new ChaosHandlerOptions_1['ChaosHandlerOptions']()),this['options']=_0x30fcaf,this[_0x42a121(0x1e9)]=_0x1ed38e;}return _0x743614['prototype'][_0x36c9c5(0x210)]=function(_0x58d7ee,_0x931805,_0x4848e3){var _0x314204=_0x36c9c5,_0x35bbd1=_0x58d7ee[_0x314204(0x1fd)]?new Headers(_0x58d7ee[_0x314204(0x1fd)]):new Headers();return _0x35bbd1[_0x314204(0x225)]('Cache-Control',_0x314204(0x1f2)),_0x35bbd1[_0x314204(0x225)](_0x314204(0x206),_0x931805),_0x35bbd1['append']('client-request-id',_0x931805),_0x35bbd1[_0x314204(0x225)](_0x314204(0x221),''),_0x35bbd1[_0x314204(0x225)](_0x314204(0x219),_0x4848e3),_0x35bbd1['append'](_0x314204(0x1ea),''),_0x58d7ee[_0x314204(0x20e)]===0x1ad&&_0x35bbd1['append'](_0x314204(0x227),'3'),_0x35bbd1;},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x213)]=function(_0x4f5a1c,_0x2d21b6,_0x16a03a){var _0x3484a4=_0x36c9c5;if(_0x4f5a1c[_0x3484a4(0x217)])return _0x4f5a1c[_0x3484a4(0x217)];var _0x5a0a04;if(_0x4f5a1c[_0x3484a4(0x20e)]>=0x190){var _0x27caed=ChaosHandlerData_1[_0x3484a4(0x229)][_0x4f5a1c['statusCode']],_0x2b5bf7=_0x4f5a1c['statusMessage'];_0x5a0a04={'error':{'code':_0x27caed,'message':_0x2b5bf7,'innerError':{'request-id':_0x2d21b6,'date':_0x16a03a}}};}else _0x5a0a04={};return _0x5a0a04;},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x22a)]=function(_0x4c12b2,_0x21fe65){var _0x35fc3b=_0x36c9c5,_0x115895=_0x21fe65[_0x35fc3b(0x220)],_0xcb016d=(0x0,MiddlewareUtil_1[_0x35fc3b(0x1ff)])(),_0x44593e=new Date(),_0x15dd55=this[_0x35fc3b(0x210)](_0x4c12b2,_0xcb016d,_0x44593e[_0x35fc3b(0x20a)]()),_0x5eda9c=this[_0x35fc3b(0x213)](_0x4c12b2,_0xcb016d,_0x44593e[_0x35fc3b(0x20a)]()),_0x23af08={'url':_0x115895,'status':_0x4c12b2[_0x35fc3b(0x20e)],'statusText':_0x4c12b2[_0x35fc3b(0x211)],'headers':_0x15dd55};_0x21fe65['response']=new Response(typeof _0x5eda9c===_0x35fc3b(0x209)?_0x5eda9c:JSON[_0x35fc3b(0x20b)](_0x5eda9c),_0x23af08);},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x1f0)]=function(_0x3e4108,_0x27c06a){var _0x445300=_0x36c9c5;return tslib_1[_0x445300(0x202)](this,void 0x0,void 0x0,function(){return tslib_1['__generator'](this,function(_0x906252){var _0x3021ca=a0_0x4807;switch(_0x906252[_0x3021ca(0x218)]){case 0x0:this[_0x3021ca(0x1ef)](_0x3e4108,_0x27c06a['request'],_0x27c06a[_0x3021ca(0x1fe)][_0x3021ca(0x208)]);if(!(_0x3e4108[_0x3021ca(0x1f9)]===ChaosStrategy_1[_0x3021ca(0x21f)][_0x3021ca(0x20c)]&&!this[_0x3021ca(0x205)]||Math[_0x3021ca(0x1f1)](Math[_0x3021ca(0x201)]()*0x64)<_0x3e4108[_0x3021ca(0x226)]))return[0x3,0x1];this[_0x3021ca(0x22a)](_0x3e4108,_0x27c06a);return[0x3,0x3];case 0x1:if(!this[_0x3021ca(0x205)])return[0x3,0x3];return[0x4,this[_0x3021ca(0x205)][_0x3021ca(0x1f4)](_0x27c06a)];case 0x2:_0x906252['sent'](),_0x906252[_0x3021ca(0x218)]=0x3;case 0x3:return[0x2];}});});},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x214)]=function(_0x1bde39){var _0x248ad0=_0x36c9c5,_0x5a15dd=ChaosHandlerData_1[_0x248ad0(0x222)][_0x1bde39];return _0x5a15dd[Math['floor'](Math[_0x248ad0(0x201)]()*_0x5a15dd[_0x248ad0(0x1e8)])];},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x1ee)]=function(_0x1f9071){var _0x60d748=_0x36c9c5,_0x1e545e=/https?:\/\/graph\.microsoft\.com\/[^/]+(.+?)(\?|$)/,_0x36eaaa;return _0x1e545e[_0x60d748(0x223)](_0x1f9071)!==null&&(_0x36eaaa=_0x1e545e[_0x60d748(0x223)](_0x1f9071)[0x1]),_0x36eaaa;},_0x743614[_0x36c9c5(0x200)][_0x36c9c5(0x1ef)]=function(_0x22347b,_0x3a8e4b,_0x153def){var _0x1002a3=_0x36c9c5,_0x34da94=this;if(_0x22347b[_0x1002a3(0x1f9)]===ChaosStrategy_1[_0x1002a3(0x21f)]['MANUAL']){if(_0x22347b['statusCode']===undefined){var _0x514fc3=this[_0x1002a3(0x1ee)](_0x3a8e4b);this[_0x1002a3(0x1e9)]['get'](_0x514fc3)!==undefined?this[_0x1002a3(0x1e9)][_0x1002a3(0x224)](_0x514fc3)[_0x1002a3(0x224)](_0x153def)!==undefined&&(_0x22347b[_0x1002a3(0x20e)]=this[_0x1002a3(0x1e9)][_0x1002a3(0x224)](_0x514fc3)[_0x1002a3(0x224)](_0x153def)):this[_0x1002a3(0x1e9)]['forEach'](function(_0xcb87aa,_0x30319b){var _0x7434b6=_0x1002a3,_0x281541=new RegExp(_0x30319b+'$');_0x281541[_0x7434b6(0x216)](_0x514fc3)&&(_0x34da94[_0x7434b6(0x1e9)][_0x7434b6(0x224)](_0x30319b)[_0x7434b6(0x224)](_0x153def)!==undefined&&(_0x22347b['statusCode']=_0x34da94[_0x7434b6(0x1e9)][_0x7434b6(0x224)](_0x30319b)[_0x7434b6(0x224)](_0x153def)));});}}else _0x22347b[_0x1002a3(0x20e)]=this[_0x1002a3(0x214)](_0x153def);},_0x743614[_0x36c9c5(0x200)]['getOptions']=function(_0x10e449){var _0x1a6777=_0x36c9c5,_0x5380f9;return _0x10e449[_0x1a6777(0x1fb)]instanceof MiddlewareControl_1[_0x1a6777(0x207)]&&(_0x5380f9=_0x10e449['middlewareControl']['getMiddlewareOptions'](ChaosHandlerOptions_1[_0x1a6777(0x21c)])),typeof _0x5380f9===_0x1a6777(0x21d)&&(_0x5380f9=Object['assign'](new ChaosHandlerOptions_1[(_0x1a6777(0x21c))](),this[_0x1a6777(0x1fe)])),_0x5380f9;},_0x743614['prototype'][_0x36c9c5(0x1f4)]=function(_0x5576cf){var _0x5e5bbe=_0x36c9c5;return tslib_1[_0x5e5bbe(0x202)](this,void 0x0,void 0x0,function(){var _0x1ea573=_0x5e5bbe,_0x44d1ec;return tslib_1[_0x1ea573(0x1f6)](this,function(_0x379f72){var _0x28559e=_0x1ea573;switch(_0x379f72[_0x28559e(0x218)]){case 0x0:_0x44d1ec=this[_0x28559e(0x21a)](_0x5576cf);return[0x4,this['sendRequest'](_0x44d1ec,_0x5576cf)];case 0x1:return[0x2,_0x379f72[_0x28559e(0x1f8)]()];}});});},_0x743614['prototype'][_0x36c9c5(0x1ec)]=function(_0x226cfc){var _0x14dba0=_0x36c9c5;this[_0x14dba0(0x205)]=_0x226cfc;},_0x743614;}());exports[a0_0x5d7355(0x1f3)]=ChaosHandler;